!function(e){"use strict";function t(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function n(t,n){var o=serializeObjectByTag(t),r=t.attr("data-action");n.addClass("loadingbar primary").prop("disabled",!0),t.find("input").removeClass("is-invalid"),t.find("textarea").removeClass("is-invalid"),e.post(r,o,function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))}).fail(function(e){n.removeClass("loadingbar primary").prop("disabled",!1);var o=e.responseJSON;o&&"zoom_jwt_token_invalid"===o.status&&Swal.fire({icon:"error",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+zoomJwtTokenInvalid+"</h3>",showConfirmButton:!1,width:"25rem"}),o&&o.errors&&Object.keys(o.errors).forEach(function(e){var n=o.errors[e],r=t.find(".js-ajax-"+e);"zoom-not-complete-alert"===e?t.find(".js-zoom-not-complete-alert").removeClass("d-none"):(r.addClass("is-invalid"),r.parent().find(".invalid-feedback").text(n[0]))})})}e("#summernote").length&&e("#summernote").summernote({tabsize:2,height:400,placeholder:e("#summernote").attr("placeholder"),dialogsInBody:!0,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]]}),e("body").on("click","#sendForReview",function(t){e(this).addClass("loadingbar primary").prop("disabled",!0),t.preventDefault(),e("#forDraft").val(0),e("#webinarForm").submit()}),e("body").on("click","#saveAsDraft",function(t){e(this).addClass("loadingbar primary").prop("disabled",!0),t.preventDefault(),e("#forDraft").val(1),e("#webinarForm").submit()}),e("body").on("click","#getNextStep",function(t){e(this).addClass("loadingbar primary").prop("disabled",!0),t.preventDefault(),e("#forDraft").val(1),e("#getNext").val(1),e("#webinarForm").submit()}),e("body").on("click",".js-get-next-step",function(t){if(t.preventDefault(),!e(this).hasClass("active")){e(this).addClass("loadingbar primary").prop("disabled",!0);var n=e(this).attr("data-step");e("#getStep").val(n),e("#forDraft").val(1),e("#getNext").val(1),e("#webinarForm").submit()}}),e("#partnerInstructorSwitch").on("change.bootstrapSwitch",function(t){t.target.checked?(e("#partnerInstructorInput").removeClass("d-none"),panelSearchUserSelect2()):e("#partnerInstructorInput").addClass("d-none")}),e("body").on("change","#categories",function(t){t.preventDefault();var n=this.value;e.get("/panel/filters/get-by-category-id/"+n,function(t){if(t&&void 0!==t.filters&&t.filters.length){var n="";Object.keys(t.filters).forEach(function(e){var o=t.filters[e],r=[];o.options.length&&(r=o.options),n+='<div class="col-12 col-md-3">\n<div class="webinar-category-filters">\n<strong class="category-filter-title d-block">'+o.title+'</strong>\n<div class="py-10"></div>\n\n',r.length&&Object.keys(r).forEach(function(e){var t=r[e];n+='<div class="form-group mt-20 d-flex align-items-center justify-content-between">\n<label class="cursor-pointer" for="filterOption'+t.id+'">'+t.title+'</label>\n<div class="custom-control custom-checkbox">\n<input type="checkbox" name="filters[]" value="'+t.id+'" class="custom-control-input" id="filterOption'+t.id+'">\n<label class="custom-control-label" for="filterOption'+t.id+'"></label>\n</div>\n</div>\n'}),n+="</div></div>"}),e("#categoriesFiltersContainer").removeClass("d-none"),e("#categoriesFiltersCard").html(n)}else e("#categoriesFiltersContainer").addClass("d-none"),e("#categoriesFiltersCard").html("")})}),e("body").on("click",".cancel-accordion",function(t){t.preventDefault(),e(this).closest(".accordion-row").remove()}),e("body").on("click","#webinarAddTicket",function(n){n.preventDefault();var o=t(),r=e("#newTicketForm").html();r=r.replaceAll("record",o),e("#ticketsAccordion").prepend(r),resetDatePickers(),feather.replace()}),e("body").on("click",".js-save-ticket",function(t){t.preventDefault();var o=e(this);n(o.closest(".ticket-form"),o)}),e("body").on("click","#webinarAddSession",function(n){n.preventDefault();var o=t(),r=e("#newSessionForm").html();r=r.replaceAll("record",o),e("#sessionsAccordion").prepend(r),resetDatePickers(),feather.replace()}),e("body").on("click",".js-save-session",function(t){t.preventDefault();var o=e(this);n(o.closest(".session-form"),o)}),e("body").on("click","#webinarAddFile",function(n){n.preventDefault();var o=t(),r=e("#newFileForm").html();r=r.replaceAll("record",o),e("#filesAccordion").prepend(r),resetDatePickers(),feather.replace()}),e("body").on("click",".js-save-file",function(t){t.preventDefault();var o=e(this);n(o.closest(".file-form"),o)}),e("body").on("click","#AddTextLesson",function(n){n.preventDefault();var o=t(),r=e("#newTextLessonForm").html();r=(r=(r=(r=r.replaceAll("record",o)).replaceAll("attachments-select2","attachments-select2-"+o)).replaceAll("js-content-summernote","js-content-summernote-"+o)).replaceAll("js-hidden-content-summernote","js-hidden-content-summernote-"+o),e("#text_lessonsAccordion").prepend(r),e(".attachments-select2-"+o).select2({multiple:!0,width:"100%"}),e(".js-content-summernote-"+o).summernote({tabsize:2,height:400,callbacks:{onChange:function(t,n){e(".js-hidden-content-summernote-"+o).val(t)}}}),feather.replace()}),e("body").on("click",".js-save-text_lesson",function(t){t.preventDefault();var o=e(this);n(o.closest(".text_lesson-form"),o)}),e(document).ready(function(){var t=e("#text_lessonsAccordion .js-content-summernote");t.length&&t.summernote({tabsize:2,height:400,callbacks:{onChange:function(t,n){e(".js-hidden-content-summernote").val(t)}}}),setTimeout(function(){var t;(t=e("body #prerequisitesAccordion .prerequisites-select2")).length&&t.select2({minimumInputLength:3,allowClear:!0,ajax:{url:"/panel/webinars/search",dataType:"json",type:"POST",quietMillis:50,data:function(t){return{term:t.term,webinar_id:e(this).data("webinar-id")}},processResults:function(t){return{results:e.map(t,function(e){return{text:e.title,id:e.id}})}}}}),e("#text_lessonsAccordion .attachments-select2").length&&e("#text_lessonsAccordion .attachments-select2").select2({multiple:!0,width:"100%"})},1e3)}),e("body").on("click","#webinarAddPrerequisites",function(n){n.preventDefault();var o=t(),r=e("#newPrerequisiteForm").html();r=(r=r.replaceAll("record",o)).replaceAll("prerequisites-select2","prerequisites-select2-"+o),e("#prerequisitesAccordion").prepend(r),e(".prerequisites-select2-"+o).select2({placeholder:e(this).data("placeholder"),minimumInputLength:3,allowClear:!0,ajax:{url:"/panel/webinars/search",dataType:"json",type:"POST",quietMillis:50,data:function(t){return{term:t.term,webinar_id:e(this).data("webinar-id")}},processResults:function(t){return{results:e.map(t,function(e){return{text:e.title,id:e.id}})}}}}),feather.replace()}),e("body").on("click",".js-save-prerequisite",function(t){t.preventDefault();var o=e(this);n(o.closest(".prerequisite-form"),o)}),e("body").on("click","#webinarAddFAQ",function(n){n.preventDefault();var o=t(),r=e("#newFaqForm").html();r=r.replaceAll("record",o),e("#faqsAccordion").prepend(r),feather.replace()}),e("body").on("click",".js-save-faq",function(t){t.preventDefault();var o=e(this);n(o.closest(".faq-form"),o)}),e("body").on("click","#webinarAddQuiz",function(n){n.preventDefault();var o=t(),r=e("#newQuizForm").html();r=r.replaceAll("record",o),e("#quizzesAccordion").prepend(r),feather.replace()}),e("body").on("click",".js-save-quiz",function(t){t.preventDefault();var o=e(this);n(o.closest(".quiz-form"),o)}),e(document).ready(function(){function t(t){t.length&&t.sortable({group:"no-drop",handle:".move-icon",axis:"y",update:function(n,o){var r=t.sortable("toArray",{attribute:"data-id"});!function(t,n){e.post("/panel/webinars/order-items",{table:t,items:n},function(e){})}(n.target.getAttribute("data-order-table"),r.join(","))}})}var n=e(".draggable-lists"),o=e(".draggable-lists2"),r=e(".draggable-lists3");t(n),o.length&&t(o),r.length&&t(r)}),e("body").on("change",".js-file-storage",function(t){t.preventDefault();var n=e(this).attr("value"),o=e(this).closest(".file-form");this.checked&&"online"===n?(o.find(".local-input").addClass("d-none"),o.find(".online-inputs").removeClass("d-none"),o.find(".js-downloadable-file").addClass("d-none"),o.find(".js-downloadable-file input").prop("checked",!1)):(o.find(".local-input").removeClass("d-none"),o.find(".online-inputs").addClass("d-none"),o.find(".js-downloadable-file").removeClass("d-none"),o.find(".js-downloadable-file input").prop("checked",!0))}),e("body").on("change",".js-api-input",function(t){t.preventDefault();var n=e(this).closest(".session-form"),o=this.value;n.find(".js-zoom-not-complete-alert").addClass("d-none"),"big_blue_button"===o?(n.find(".js-local-link").addClass("d-none"),n.find(".js-api-secret").removeClass("d-none"),n.find(".js-moderator-secret").removeClass("d-none")):"zoom"===o?(n.find(".js-local-link").addClass("d-none"),n.find(".js-api-secret").addClass("d-none"),n.find(".js-moderator-secret").addClass("d-none"),hasZoomApiToken&&"true"!==hasZoomApiToken&&n.find(".js-zoom-not-complete-alert").removeClass("d-none")):(n.find(".js-local-link").removeClass("d-none"),n.find(".js-api-secret").removeClass("d-none"),n.find(".js-moderator-secret").addClass("d-none"))})}(jQuery);
